

<!DOCTYPE html>
<html class="no-js ss-preload" lang="en">
<head>

    <!--- basic page needs
    ================================================== -->
    <meta charset="utf-8">
    <title>Unleashing Python's Hidden Power: Profiling for Performance Optimization | KH</title>
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- mobile specific metas
    ================================================== -->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- CSS
    ================================================== -->
    <link rel="stylesheet" type="text/css" href="/theme/css/vendor.css" />

    <link rel="stylesheet" type="text/css" href="/theme/css/styles.css" />


    <link id="pygments-dark-theme" rel="stylesheet" type="text/css"
          media="(prefers-color-scheme: dark), (prefers-color-scheme: no-preference)"
          href="/theme/pygments/monokai.min.css"><link rel="stylesheet" type="text/css" href="/theme/font-awesome/css/fontawesome.css">
    <link rel="stylesheet" type="text/css" href="/theme/font-awesome/css/brands.css">
    <link rel="stylesheet" type="text/css" href="/theme/font-awesome/css/solid.css">

    <!-- favicons
    ================================================== -->
    <link rel="apple-touch-icon" sizes="180x180"
          href="/theme/images/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32"
          href="/theme/images/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16"
          href="/theme/images/favicons/favicon-16x16.png">
    <link rel="manifest" href="/theme/site.webmanifest">



    <!-- Open Graph -->
    <meta property="og:site_name" content="KH"/>
    <meta property="og:title" content="Unleashing Python&#39;s Hidden Power: Profiling for Performance Optimization"/>
    <meta property="og:description" content="Profiling is a fundamental technique in software development that enables programmers to identify and rectify performance bottlenecks in their code. Python offers several built-in and third-party profiling tools to help developers optimize their applications."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="/python-profiling-for-performance.html"/>
    <meta property="og:type" content="article"/>
    <meta property="article:published_time" content="2023-08-16 00:00:00+08:00"/>
    <meta property="article:modified_time" content="2023-08-16 00:00:00+08:00"/>
    <meta property="article:author" content="Ken Huang">
    <meta property="article:section" content="Python"/>
        <meta property="article:tag" content="Python"/>
        <meta property="article:tag" content="Profiling"/>
        <meta property="article:tag" content="cProfile"/>
        <meta property="article:tag" content="profile"/>
        <meta property="article:tag" content="memory-profiler"/>
        <meta property="article:tag" content="line-profiler"/>
        <meta property="og:image" content="/images/kolleen-gladden-ij5_qCBpIVY-unsplash.jpg">

    <!-- Twitter Cards -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="KH">
    <meta name="twitter:description" content="Profiling is a fundamental technique in software development that enables programmers to identify and rectify performance bottlenecks in their code. Python offers several built-in and third-party profiling tools to help developers optimize their applications."/>
        <meta name="twitter:image" content="/images/kolleen-gladden-ij5_qCBpIVY-unsplash.jpg">
    <meta name="twitter:url" content="/python-profiling-for-performance.html"/>
</head>

<body id="top">


<!-- # preloader
================================================== -->
<div id="preloader">
    <div id="loader">
    </div>
</div>


<!-- # page wrap
================================================== -->
<div class="s-pagewrap">

    <div class="circles">
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
    </div>


    <!-- ## site header
    ================================================== -->





<header class="s-header">

    <div class="header-mobile">
        <span class="mobile-home-link">
            <a href="/">
                <img alt="" src="/theme/images/logos/logo-main.png"/>
            </a>
        </span>
        <a class="mobile-menu-toggle" href="#0"><span>Menu</span></a>
    </div>

    <div class="row wide main-nav-wrap">
        <nav class="column lg-12 main-nav">
            <ul>
                <li><a href="/" class="home-link"><img alt=""
                                                       src="/theme/images/logos/logo-main.png"/></a>
                </li>
                <li class="current">
                    <a href="/#intro" class="">Intro</a>
                </li>
                <li class="">
                    <a href="/#about" class="">About</a>
                </li>
                <li class="">
                    <a href="/#works" class="">Works</a>
                </li>
                <li class="">
                    <a href="/blog" class="">Blog</a>
                </li>
            </ul>
        </nav>
    </div>

</header>    <!-- end s-header -->


    <main class="s-content">

        <!-- # site main content
        ================================================== -->
        <article id="content" class="s-content entry">

            <div class="s-pageheader entry__header">
                <div class="row">
                    <div class="column xl-12">

                        <h1 class="entry__title">
                            Unleashing Python's Hidden Power: Profiling for Performance Optimization
                        </h1> <!-- end entry__title -->

                        <div class="entry__meta">
                            <div class="entry__meta-date">
                                <svg width="24" height="24" fill="none" viewBox="0 0 24 24">
                                    <circle cx="12" cy="12" r="7.25" stroke="currentColor" stroke-width="1.5"></circle>
                                    <path stroke="currentColor" stroke-width="1.5" d="M12 8V12L14 14"></path>
                                </svg>
                                August 16, 2023
                            </div>
                            <div class="entry__meta-cat">
                                <svg width="24" height="24" fill="none" viewBox="0 0 24 24">
                                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M19.25 17.25V9.75C19.25 8.64543 18.3546 7.75 17.25 7.75H4.75V17.25C4.75 18.3546 5.64543 19.25 6.75 19.25H17.25C18.3546 19.25 19.25 18.3546 19.25 17.25Z"></path>
                                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M13.5 7.5L12.5685 5.7923C12.2181 5.14977 11.5446 4.75 10.8127 4.75H6.75C5.64543 4.75 4.75 5.64543 4.75 6.75V11"></path>
                                </svg>
                                <span class="cat-links">
                                    <a href="/tag/python.html">Python</a>
                                    <a href="/tag/profiling.html">Profiling</a>
                                    <a href="/tag/cprofile.html">cProfile</a>
                                    <a href="/tag/profile.html">profile</a>
                                    <a href="/tag/memory-profiler.html">memory-profiler</a>
                                    <a href="/tag/line-profiler.html">line-profiler</a>
                                </span>
                            </div>
                        </div> <!-- end entry__meta -->

                    </div>
                </div>
            </div> <!-- end entry__header -->

            <div class="s-pagecontent entry__content">

                <div class="row entry__media">
                    <div class="column xl-12">
                        <figure class="featured-image">
                            <img src="/images/kolleen-gladden-ij5_qCBpIVY-unsplash.jpg" alt=""/>
                        </figure>
                        <div class="featured-image-title">
                            Photo by <a href="https://unsplash.com/@rockthechaos?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText">Kolleen  Gladden</a> on <a href="https://unsplash.com/photos/ij5_qCBpIVY?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText">Unsplash</a>
                        </div>
                    </div>
                </div> <!-- end entry__media -->

                <div class="row entry__primary width-narrower">
                    <div class="column xl-12">
                         <p>Profiling is a fundamental technique in software development that enables programmers to identify and rectify performance bottlenecks in their code. Python offers several built-in and third-party profiling tools to help developers optimize their applications. In this article, we'll delve into Python's standard library profiling modules, <code>cProfile</code> and <code>profile</code>, and introduce two popular third-party profilers: <code>memory-profiler</code> and <code>line-profiler</code>.</p>
<h2>Understanding Profiling</h2>
<p>Profiling involves measuring the execution time, memory usage, and other relevant metrics of a program to pinpoint areas that could be optimized. It aids developers in making informed decisions about code improvements, leading to enhanced performance and better resource utilization.</p>
<h2>cProfile and profile: Python's Standard Profiling Modules</h2>
<h3>cProfile</h3>
<p><code>cProfile</code> is a C-extension-based profiler included in Python's standard library. It provides detailed information about function calls, execution times, and call counts. Here's how you can use it:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">cProfile</span>

<span class="k">def</span> <span class="nf">example_function</span><span class="p">():</span>
    <span class="n">total</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1000</span><span class="p">):</span>
        <span class="n">total</span> <span class="o">+=</span> <span class="n">i</span>
    <span class="k">return</span> <span class="n">total</span>

<span class="n">profiler</span> <span class="o">=</span> <span class="n">cProfile</span><span class="o">.</span><span class="n">Profile</span><span class="p">()</span>
<span class="n">profiler</span><span class="o">.</span><span class="n">enable</span><span class="p">()</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">example_function</span><span class="p">()</span>

<span class="n">profiler</span><span class="o">.</span><span class="n">disable</span><span class="p">()</span>
<span class="n">profiler</span><span class="o">.</span><span class="n">print_stats</span><span class="p">()</span>
</code></pre></div>

<p>profile
The profile module is a pure Python profiler that is less efficient than cProfile but is more portable:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">profile</span>

<span class="k">def</span> <span class="nf">example_function</span><span class="p">():</span>
    <span class="n">total</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1000</span><span class="p">):</span>
        <span class="n">total</span> <span class="o">+=</span> <span class="n">i</span>
    <span class="k">return</span> <span class="n">total</span>

<span class="n">profiler</span> <span class="o">=</span> <span class="n">profile</span><span class="o">.</span><span class="n">Profile</span><span class="p">()</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">profiler</span><span class="o">.</span><span class="n">runcall</span><span class="p">(</span><span class="n">example_function</span><span class="p">)</span>
<span class="n">profiler</span><span class="o">.</span><span class="n">print_stats</span><span class="p">()</span>
</code></pre></div>

<h2>Third-Party Profilers</h2>
<h3>memory-profiler</h3>
<p>The memory-profiler is a third-party profiler that focuses on memory usage. It helps identify memory-hungry parts of your code. Here's how you can use it:</p>
<ul>
<li>Install the package:</li>
</ul>
<div class="highlight"><pre><span></span><code>pip install memory-profiler
</code></pre></div>

<ul>
<li>Decorate the function you want to profile:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">memory_profiler</span> <span class="kn">import</span> <span class="n">profile</span>

<span class="nd">@profile</span>
<span class="k">def</span> <span class="nf">example_function</span><span class="p">():</span>
    <span class="n">total</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1000</span><span class="p">):</span>
        <span class="n">total</span> <span class="o">+=</span> <span class="n">i</span>
    <span class="k">return</span> <span class="n">total</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">example_function</span><span class="p">()</span>
</code></pre></div>

<ul>
<li>Run the script using the mprof command (requires matplotlib):</li>
</ul>
<div class="highlight"><pre><span></span><code>pip install matplotlib  <span class="c1"># Install matplotlib if not already installed</span>
mprof run script.py
mprof plot
</code></pre></div>

<h3>line-profiler</h3>
<p>The line-profiler is another third-party profiler that provides insights into line-by-line execution times. It helps you identify specific lines causing performance bottlenecks. Here's how to use it:</p>
<ul>
<li>Install the package:</li>
</ul>
<div class="highlight"><pre><span></span><code>pip install line-profiler
</code></pre></div>

<ul>
<li>Decorate the function you want to profile:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">line_profiler</span> <span class="kn">import</span> <span class="n">profile</span>

<span class="nd">@profile</span>
<span class="k">def</span> <span class="nf">is_prime</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">max_val</span> <span class="o">=</span> <span class="n">n</span> <span class="o">**</span> <span class="mf">0.5</span>
    <span class="n">stop</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">max_val</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">stop</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">%</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
    <span class="k">return</span> <span class="kc">True</span>

<span class="nd">@profile</span>
<span class="k">def</span> <span class="nf">find_primes</span><span class="p">(</span><span class="n">size</span><span class="p">):</span>
    <span class="n">primes</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">size</span><span class="p">):</span>
        <span class="n">flag</span> <span class="o">=</span> <span class="n">is_prime</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">flag</span><span class="p">:</span>
            <span class="n">primes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">primes</span>

<span class="nd">@profile</span>
<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;start calculating&#39;</span><span class="p">)</span>
    <span class="n">primes</span> <span class="o">=</span> <span class="n">find_primes</span><span class="p">(</span><span class="mi">100000</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;done calculating. Found </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">primes</span><span class="p">)</span><span class="si">}</span><span class="s1"> primes.&#39;</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div>

<h2>Conclusion</h2>
<p>Profiling is a critical step in the software development process that enables developers to optimize their code for better performance. Python provides cProfile and profile as built-in profilers, while third-party tools like memory-profiler and line-profiler offer additional insights into memory usage and line-by-line execution times.</p>
<p>By using these profiling tools effectively, developers can identify and address bottlenecks, resulting in faster, more efficient, and more responsive Python applications. Choose the appropriate profiler based on your project's requirements, and harness the power of profiling to deliver top-notch software.</p>

                        <div class="post-nav">
                                <div class="post-nav__prev">
                                    <span>Prev</span>
                                    <a rel="prev" href="/golang-adapter-pattern.html">← Mastering the Adapter Design Pattern in Go</a>
                                </div>


                        </div> <!-- end post-nav -->
                    </div> <!-- end column-->
                </div> <!-- end entry__primary -->

            </div> <!-- end entry__content -->

        </article> <!-- s-content entry-->

    </main>

    <!-- ## footer
    ================================================== -->
<footer class="s-footer">

    <div class="row">
        <div class="column ss-copyright">
            <span>Powered by <a href="https://getpelican.com/">Pelican</a></span>
            <span>© Copyright Ken Huang 2023</span>
            <span>Design by <a href="https://www.styleshout.com/">StyleShout</a></span>
        </div>

        <div class="ss-go-top">
            <a class="smoothscroll" title="Back to Top" href="#top">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill-rule="evenodd" clip-rule="evenodd"><path d="M11 2.206l-6.235 7.528-.765-.645 7.521-9 7.479 9-.764.646-6.236-7.53v21.884h-1v-21.883z"/></svg>
            </a>
        </div>
    </div>
</footer>    <!-- end s-footer -->

</div> <!-- end -s-pagewrap -->


<!-- Java Script
================================================== -->

<script src="/theme/js/plugins.js"></script>

<script src="/theme/js/main.js"></script>

<script src="/theme/js/clipboard.min.js"></script>

<script src="/theme/js/custom.js"></script>


    
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-M3C36GR88F"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-M3C36GR88F');
</script>

</body>
</html>