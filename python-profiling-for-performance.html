
<!DOCTYPE html>

<html class="no-js ss-preload" lang="en">
<head>
<!--- basic page needs
    ================================================== -->
<meta charset="utf-8"/>
<title>Unleashing Python's Hidden Power: Profiling for Performance Optimization | KH</title>
<meta content="I am Ken Huang (KH). I am a backend developer based in Taipei." name="description"/>
<meta content="Ken Huang" name="author"/>
<!-- mobile specific metas
    ================================================== -->
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<!-- CSS
    ================================================== -->
<link href="https://pandabb3356.github.io/theme/css/vendor.css" rel="stylesheet" type="text/css"/>
<link href="https://pandabb3356.github.io/theme/css/styles.css" rel="stylesheet" type="text/css"/>
<link href="https://pandabb3356.github.io/theme/pygments/monokai.min.css" id="pygments-dark-theme" media="(prefers-color-scheme: dark), (prefers-color-scheme: no-preference)" rel="stylesheet" type="text/css"/><link href="https://pandabb3356.github.io/theme/font-awesome/css/fontawesome.css" rel="stylesheet" type="text/css"/>
<link href="https://pandabb3356.github.io/theme/font-awesome/css/brands.css" rel="stylesheet" type="text/css"/>
<link href="https://pandabb3356.github.io/theme/font-awesome/css/solid.css" rel="stylesheet" type="text/css"/>
<!-- favicons
    ================================================== -->
<link href="https://pandabb3356.github.io/theme/images/favicons/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180"/>
<link href="https://pandabb3356.github.io/theme/images/favicons/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png"/>
<link href="https://pandabb3356.github.io/theme/images/favicons/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png"/>
<link href="https://pandabb3356.github.io/theme/site.webmanifest" rel="manifest"/>
<link href="https://pandabb3356.github.io/theme/css/stork-dark.css" media="screen and (prefers-color-scheme: dark)" rel="stylesheet"/>
<!-- Open Graph -->
<meta content="article" property="og:type"/>
<meta content="KH" property="og:site_name"/>
<meta content="Unleashing Python's Hidden Power: Profiling for Performance Optimization" property="og:title"/>
<meta content="Profiling is a fundamental technique in software development that enables programmers to identify and rectify performance bottlenecks in their code. Python offers several built-in and third-party profiling tools to help developers optimize their applications." property="og:description"/>
<meta content="en_US" property="og:locale"/>
<meta content="https://pandabb3356.github.io/python-profiling-for-performance.html" property="og:url"/>
<meta content="Unleashing Python's Hidden Power: Profiling for Performance Optimization" property="title"/>
<meta content="2023-08-16 00:00:00+0800" property="article:published_time"/>
<meta content="2024-04-30 17:42:27+0800" property="article:modified_time"/>
<meta content="https://pandabb3356.github.io" property="article:author"/>
<meta content="Python" property="article:section"/>
<meta content="Python" property="article:tag"/>
<meta content="Profiling" property="article:tag"/>
<meta content="cProfile" property="article:tag"/>
<meta content="profile" property="article:tag"/>
<meta content="memory-profiler" property="article:tag"/>
<meta content="line-profiler" property="article:tag"/>
<meta content="https://pandabb3356.github.io/images/covers/kolleen-gladden-ij5_qCBpIVY-unsplash.jpg" property="og:image"/>
<!-- Twitter Cards -->
<meta content="summary" name="twitter:card"/>
<meta content="Unleashing Python's Hidden Power: Profiling for Performance Optimization" name="twitter:title"/>
<meta content="Profiling is a fundamental technique in software development that enables programmers to identify and rectify performance bottlenecks in their code. Python offers several built-in and third-party profiling tools to help developers optimize their applications." name="twitter:description"/>
<meta content="https://pandabb3356.github.io/images/covers/kolleen-gladden-ij5_qCBpIVY-unsplash.jpg" name="twitter:image"/>
<meta content="https://pandabb3356.github.io/python-profiling-for-performance.html" name="twitter:url"/>
<link href="https://pandabb3356.github.io/python-profiling-for-performance.html" rel="canonical"/><script type="application/ld+json">{"@context": "https://schema.org", "@type": "BreadcrumbList", "itemListElement": [{"@type": "ListItem", "position": 1, "name": "KH", "item": "https://pandabb3356.github.io"}, {"@type": "ListItem", "position": 2, "name": "Python profiling for performance", "item": "https://pandabb3356.github.io/python-profiling-for-performance.html"}]}</script><script type="application/ld+json">{"@context": "https://schema.org", "@type": "Article", "author": {"@type": "Person", "name": "Ken Huang"}, "publisher": {"@type": "Organization", "name": "KH", "logo": {"@type": "ImageObject", "url": "https://pandabb3356.github.io/images/logos/logo-main.png"}}, "headline": "Unleashing Python's Hidden Power: Profiling for Performance Optimization", "about": "Python", "datePublished": "2023-08-16 00:00", "image": "https://pandabb3356.github.io/images/covers/kolleen-gladden-ij5_qCBpIVY-unsplash.jpg"}</script></head>
<body id="top">
<!-- # preloader
================================================== -->
<div id="preloader">
<div id="loader">
</div>
</div>
<!-- # page wrap
================================================== -->
<div class="s-pagewrap">
<div class="circles">
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
</div>
<!-- ## site header
    ================================================== -->
<header class="s-header">
<div class="header-mobile">
<span class="mobile-home-link">
<a href="https://pandabb3356.github.io/">
<img alt="" src="https://pandabb3356.github.io/theme/images/logos/logo-main.png"/>
</a>
</span>
<a class="mobile-menu-toggle" href="#0"><span>Menu</span></a>
</div>
<div class="row wide main-nav-wrap">
<nav class="column lg-12 main-nav">
<ul>
<li><a class="home-link" href="/"><img alt="" src="https://pandabb3356.github.io/theme/images/logos/logo-main.png"/></a>
</li>
<li class="">
<a class="" href="https://pandabb3356.github.io/#intro">Intro</a>
</li>
<li class="">
<a class="" href="https://pandabb3356.github.io/#about">About</a>
</li>
<li class="">
<a class="" href="https://pandabb3356.github.io/#works">Works</a>
</li>
<li class="current">
<a class="" href="https://pandabb3356.github.io/blog">Blog</a>
</li>
</ul>
</nav>
</div>
<div class="s-header__search">
<div class="s-header__search-inner">
<div class="row wide">
<form action="#" class="s-header__search-form" method="get" role="search">
<label>
<span class="h-screen-reader-text">Search for:</span>
<input autocomplete="off" class="s-header__search-field" data-stork="sitesearch" name="s" placeholder="Search for..." title="Search for:" type="search" value=""/>
</label>
<input class="s-header__search-submit" type="submit" value="Search"/>
</form>
<a class="s-header__overlay-close" href="#0" title="Close Search"> </a>
</div> <!-- end row -->
<div data-stork="sitesearch-output"></div>
</div> <!-- s-header__search-inner -->
</div> <!-- end s-header__search wrap -->
<a class="s-header__search-trigger" href="#">
<svg viewbox="0 0 17.982 17.983" xmlns="http://www.w3.org/2000/svg">
<path d="M12.622 13.611l-.209.163A7.607 7.607 0 017.7 15.399C3.454 15.399 0 11.945 0 7.7 0 3.454 3.454 0 7.7 0c4.245 0 7.699 3.454 7.699 7.7a7.613 7.613 0 01-1.626 4.714l-.163.209 4.372 4.371-.989.989-4.371-4.372zM7.7 1.399a6.307 6.307 0 00-6.3 6.3A6.307 6.307 0 007.7 14c3.473 0 6.3-2.827 6.3-6.3a6.308 6.308 0 00-6.3-6.301z" fill="#010101"></path>
</svg>
</a>
</header> <!-- end s-header -->
<main class="s-content">
<!-- # site main content
        ================================================== -->
<article class="s-content entry" id="content">
<div class="s-pageheader entry__header">
<div class="row">
<div class="column xl-12">
<h1 class="entry__title">
                            Unleashing Python's Hidden Power: Profiling for Performance Optimization
                        </h1> <!-- end entry__title -->
<div class="entry__meta">
<div class="entry__meta-date">
<svg fill="none" height="24" viewbox="0 0 24 24" width="24">
<circle cx="12" cy="12" r="7.25" stroke="currentColor" stroke-width="1.5"></circle>
<path d="M12 8V12L14 14" stroke="currentColor" stroke-width="1.5"></path>
</svg>
                                August 16, 2023
                            </div>
<div class="entry__meta-cat">
<svg fill="none" height="24" viewbox="0 0 24 24" width="24">
<path d="M19.25 17.25V9.75C19.25 8.64543 18.3546 7.75 17.25 7.75H4.75V17.25C4.75 18.3546 5.64543 19.25 6.75 19.25H17.25C18.3546 19.25 19.25 18.3546 19.25 17.25Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"></path>
<path d="M13.5 7.5L12.5685 5.7923C12.2181 5.14977 11.5446 4.75 10.8127 4.75H6.75C5.64543 4.75 4.75 5.64543 4.75 6.75V11" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"></path>
</svg>
<span class="cat-links">
<a href="https://pandabb3356.github.io/tag/python.html">Python</a>
<a href="https://pandabb3356.github.io/tag/profiling.html">Profiling</a>
<a href="https://pandabb3356.github.io/tag/cprofile.html">cProfile</a>
<a href="https://pandabb3356.github.io/tag/profile.html">profile</a>
<a href="https://pandabb3356.github.io/tag/memory-profiler.html">memory-profiler</a>
<a href="https://pandabb3356.github.io/tag/line-profiler.html">line-profiler</a>
</span>
</div>
</div> <!-- end entry__meta -->
</div>
</div>
</div> <!-- end entry__header -->
<div class="s-pagecontent entry__content">
<div class="row entry__media">
<div class="column xl-12">
<figure class="featured-image">
<img alt="" src="https://pandabb3356.github.io/images/covers/kolleen-gladden-ij5_qCBpIVY-unsplash.jpg"/>
<figcaption class="featured-image-title">
                                Photo by <a href="https://unsplash.com/@rockthechaos?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Kolleen  Gladden</a> on <a href="https://unsplash.com/photos/ij5_qCBpIVY?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Unsplash</a>
</figcaption>
</figure>
</div>
</div> <!-- end entry__media -->
<div class="row entry__primary width-narrower">
<div class="column xl-12">
<p>Profiling is a fundamental technique in software development that enables programmers to identify and rectify performance bottlenecks in their code. Python offers several built-in and third-party profiling tools to help developers optimize their applications. In this article, we'll delve into Python's standard library profiling modules, <code>cProfile</code> and <code>profile</code>, and introduce two popular third-party profilers: <code>memory-profiler</code> and <code>line-profiler</code>.</p>
<h2>Understanding Profiling</h2>
<p>Profiling involves measuring the execution time, memory usage, and other relevant metrics of a program to pinpoint areas that could be optimized. It aids developers in making informed decisions about code improvements, leading to enhanced performance and better resource utilization.</p>
<h2>cProfile and profile: Python's Standard Profiling Modules</h2>
<h3>cProfile</h3>
<p><code>cProfile</code> is a C-extension-based profiler included in Python's standard library. It provides detailed information about function calls, execution times, and call counts. Here's how you can use it:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">cProfile</span>

<span class="k">def</span> <span class="nf">example_function</span><span class="p">():</span>
    <span class="n">total</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1000</span><span class="p">):</span>
        <span class="n">total</span> <span class="o">+=</span> <span class="n">i</span>
    <span class="k">return</span> <span class="n">total</span>

<span class="n">profiler</span> <span class="o">=</span> <span class="n">cProfile</span><span class="o">.</span><span class="n">Profile</span><span class="p">()</span>
<span class="n">profiler</span><span class="o">.</span><span class="n">enable</span><span class="p">()</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">example_function</span><span class="p">()</span>

<span class="n">profiler</span><span class="o">.</span><span class="n">disable</span><span class="p">()</span>
<span class="n">profiler</span><span class="o">.</span><span class="n">print_stats</span><span class="p">()</span>
</code></pre></div>
<h3>profile</h3>
<p>The profile module is a pure Python profiler that is less efficient than cProfile but is more portable:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">profile</span>

<span class="k">def</span> <span class="nf">example_function</span><span class="p">():</span>
    <span class="n">total</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1000</span><span class="p">):</span>
        <span class="n">total</span> <span class="o">+=</span> <span class="n">i</span>
    <span class="k">return</span> <span class="n">total</span>

<span class="n">profiler</span> <span class="o">=</span> <span class="n">profile</span><span class="o">.</span><span class="n">Profile</span><span class="p">()</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">profiler</span><span class="o">.</span><span class="n">runcall</span><span class="p">(</span><span class="n">example_function</span><span class="p">)</span>
<span class="n">profiler</span><span class="o">.</span><span class="n">print_stats</span><span class="p">()</span>
</code></pre></div>
<h2>Third-Party Profilers</h2>
<h3>memory-profiler</h3>
<p>The <code>memory-profiler</code> is a third-party profiler that focuses on memory usage. It helps identify memory-hungry parts of your code. Here's how you can use it:</p>
<ul>
<li>Install the package:</li>
</ul>
<div class="highlight"><pre><span></span><code>pip install memory-profiler
</code></pre></div>
<ul>
<li>Decorate the function you want to profile:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">memory_profiler</span> <span class="kn">import</span> <span class="n">profile</span>

<span class="nd">@profile</span>
<span class="k">def</span> <span class="nf">example_function</span><span class="p">():</span>
    <span class="n">total</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1000</span><span class="p">):</span>
        <span class="n">total</span> <span class="o">+=</span> <span class="n">i</span>
    <span class="k">return</span> <span class="n">total</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">example_function</span><span class="p">()</span>
</code></pre></div>
<ul>
<li>Run the script using the <code>mprof</code> command (requires <code>matplotlib</code>):</li>
</ul>
<div class="highlight"><pre><span></span><code>pip install matplotlib  <span class="c1"># Install matplotlib if not already installed</span>
mprof run script.py
mprof plot
</code></pre></div>
<h3>line-profiler</h3>
<p>The <code>line-profiler</code> is another third-party profiler that provides insights into line-by-line execution times. It helps you identify specific lines causing performance bottlenecks. Here's how to use it:</p>
<ul>
<li>Install the package:</li>
</ul>
<div class="highlight"><pre><span></span><code>pip install line-profiler
</code></pre></div>
<ul>
<li>Decorate the function you want to profile:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">line_profiler</span> <span class="kn">import</span> <span class="n">profile</span>

<span class="nd">@profile</span>
<span class="k">def</span> <span class="nf">is_prime</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">max_val</span> <span class="o">=</span> <span class="n">n</span> <span class="o">**</span> <span class="mf">0.5</span>
    <span class="n">stop</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">max_val</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">stop</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">%</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
    <span class="k">return</span> <span class="kc">True</span>

<span class="nd">@profile</span>
<span class="k">def</span> <span class="nf">find_primes</span><span class="p">(</span><span class="n">size</span><span class="p">):</span>
    <span class="n">primes</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">size</span><span class="p">):</span>
        <span class="n">flag</span> <span class="o">=</span> <span class="n">is_prime</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">flag</span><span class="p">:</span>
            <span class="n">primes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">primes</span>

<span class="nd">@profile</span>
<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">'start calculating'</span><span class="p">)</span>
    <span class="n">primes</span> <span class="o">=</span> <span class="n">find_primes</span><span class="p">(</span><span class="mi">100000</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'done calculating. Found </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">primes</span><span class="p">)</span><span class="si">}</span><span class="s1"> primes.'</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">"__main__"</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div>
<h2>Conclusion</h2>
<p>Profiling is a critical step in the software development process that enables developers to optimize their code for better performance. Python provides cProfile and profile as built-in profilers, while third-party tools like memory-profiler and line-profiler offer additional insights into memory usage and line-by-line execution times.</p>
<p>By using these profiling tools effectively, developers can identify and address bottlenecks, resulting in faster, more efficient, and more responsive Python applications. Choose the appropriate profiler based on your project's requirements, and harness the power of profiling to deliver top-notch software.</p>
<div class="post-nav">
<div class="post-nav__prev">
<span>Prev</span>
<a href="https://pandabb3356.github.io/golang-adapter-pattern.html" rel="prev">← Mastering the Adapter Design Pattern in Go</a>
</div>
<div class="post-nav__next">
<span>Next</span>
<a href="https://pandabb3356.github.io/designing-notification-service-python.html" rel="next">Designing a Notification Service using Python →</a>
</div>
</div> <!-- end post-nav -->
</div> <!-- end column-->
</div> <!-- end entry__primary -->
<div class="row related-posts">
<div class="column xl-12">
<h4 class="text-center">Similar Posts</h4>
<div class="grid-list-items">
<div class="grid-list-items__item blog-card">
<div class="blog-card__header">
<h3 class="blog-card__title"><a href="https://pandabb3356.github.io/designing-notification-service-python.html">Designing a Notification Service using Python</a></h3>
</div>
<div>
<img alt="" loading="lazy" src="https://pandabb3356.github.io/images/covers/jamie-street-33oxtOMk6Ac-unsplash.jpg"/>
</div>
<div class="blog-card__text">
<p>A guide on creating a Python-based notification service that integrates with multiple providers.</p>
</div>
</div> <!-- end blog-card -->
</div> <!-- end grid-list-items -->
</div> <!-- end column -->
</div> <!-- end related-posts -->
</div> <!-- end entry__content -->
</article> <!-- s-content entry-->
</main>
<!-- ## footer
    ================================================== -->
<footer class="s-footer">
<div class="row">
<div class="column ss-copyright">
<span>Powered by <a href="https://getpelican.com/">Pelican</a></span>
<span>© Copyright Ken Huang 2024</span>
<span>Design by <a href="https://www.styleshout.com/">StyleShout</a></span>
</div>
<div class="ss-go-top">
<a class="smoothscroll" href="#top" title="Back to Top">
<svg clip-rule="evenodd" fill-rule="evenodd" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M11 2.206l-6.235 7.528-.765-.645 7.521-9 7.479 9-.764.646-6.236-7.53v21.884h-1v-21.883z"></path></svg>
</a>
</div>
</div>
</footer> <!-- end s-footer -->
</div> <!-- end -s-pagewrap -->
<!-- Java Script
================================================== -->
<script src="https://pandabb3356.github.io/theme/js/plugins.js"></script>
<script src="https://pandabb3356.github.io/theme/js/clipboard.min.js"></script>
<script src="https://pandabb3356.github.io/theme/js/stork.min.js"></script>
<script src="https://pandabb3356.github.io/theme/js/main.js"></script>
<script>
    stork.register("sitesearch", "https://pandabb3356.github.io/search-index.st");
</script>
<!-- Google tag (gtag.js) -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-M3C36GR88F"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-M3C36GR88F');
</script>
</body>
</html>