

<!DOCTYPE html>
<html class="no-js ss-preload" lang="en">
<head>

    <!--- basic page needs
    ================================================== -->
    <meta charset="utf-8">
    <title>Integrating pprof with Gin | KH</title>
    <meta name="description" content="I am Ken Huang (KH). I am a backend developer based in Taipei.">
    <meta name="author" content="Ken Huang">

    <!-- mobile specific metas
    ================================================== -->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- CSS
    ================================================== -->
    <link rel="stylesheet" type="text/css" href="https://pandabb3356.github.io/theme/css/vendor.css" />

    <link rel="stylesheet" type="text/css" href="https://pandabb3356.github.io/theme/css/styles.css" />


    <link id="pygments-dark-theme" rel="stylesheet" type="text/css"
          media="(prefers-color-scheme: dark), (prefers-color-scheme: no-preference)"
          href="https://pandabb3356.github.io/theme/pygments/monokai.min.css"><link rel="stylesheet" type="text/css" href="https://pandabb3356.github.io/theme/font-awesome/css/fontawesome.css">
    <link rel="stylesheet" type="text/css" href="https://pandabb3356.github.io/theme/font-awesome/css/brands.css">
    <link rel="stylesheet" type="text/css" href="https://pandabb3356.github.io/theme/font-awesome/css/solid.css">

    <!-- favicons
    ================================================== -->
    <link rel="apple-touch-icon" sizes="180x180"
          href="https://pandabb3356.github.io/theme/images/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32"
          href="https://pandabb3356.github.io/theme/images/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16"
          href="https://pandabb3356.github.io/theme/images/favicons/favicon-16x16.png">
    <link rel="manifest" href="https://pandabb3356.github.io/theme/site.webmanifest">



    <!-- Open Graph -->
    <meta property="og:type" content="article">
    <meta property="og:site_name" content="KH">
    <meta property="og:title" content="Integrating pprof with Gin">
    <meta property="og:description" content="A step-by-step guide on how to integrate Go&#39;s pprof with the Gin web framework using gin-contrib/pprof.">
    <meta property="og:locale" content="en_US">
    <meta property="og:url" content="https://pandabb3356.github.io/golang-gin-pprof-integration.html">
    <meta property="title" content="Integrating pprof with Gin">
    <meta property="article:published_time" content="2023-08-18 21:43:46+0800">
    <meta property="article:modified_time" content="2023-08-18 21:43:46+0800">
    <meta property="article:author" content="https://pandabb3356.github.io">
    <meta property="article:section" content="Golang">
        <meta property="article:tag" content="golang">
        <meta property="article:tag" content="gin">
        <meta property="article:tag" content="pprof">
        <meta property="og:image" content="https://pandabb3356.github.io/images/covers/austin-distel-21GWwco-JBQ-unsplash.jpg">

    <!-- Twitter Cards -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Integrating pprof with Gin">
    <meta name="twitter:description" content="A step-by-step guide on how to integrate Go&#39;s pprof with the Gin web framework using gin-contrib/pprof.">
        <meta name="twitter:image" content="https://pandabb3356.github.io/images/covers/austin-distel-21GWwco-JBQ-unsplash.jpg">
    <meta name="twitter:url" content="https://pandabb3356.github.io/golang-gin-pprof-integration.html">
</head>

<body id="top">


<!-- # preloader
================================================== -->
<div id="preloader">
    <div id="loader">
    </div>
</div>


<!-- # page wrap
================================================== -->
<div class="s-pagewrap">

    <div class="circles">
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
    </div>


    <!-- ## site header
    ================================================== -->





<header class="s-header">

    <div class="header-mobile">
        <span class="mobile-home-link">
            <a href="https://pandabb3356.github.io/">
                <img alt="" src="https://pandabb3356.github.io/theme/images/logos/logo-main.png"/>
            </a>
        </span>
        <a class="mobile-menu-toggle" href="#0"><span>Menu</span></a>
    </div>

    <div class="row wide main-nav-wrap">
        <nav class="column lg-12 main-nav">
            <ul>
                <li><a href="/" class="home-link"><img alt=""
                                                       src="https://pandabb3356.github.io/theme/images/logos/logo-main.png"/></a>
                </li>
                <li class="current">
                    <a href="https://pandabb3356.github.io/#intro" class="">Intro</a>
                </li>
                <li class="">
                    <a href="https://pandabb3356.github.io/#about" class="">About</a>
                </li>
                <li class="">
                    <a href="https://pandabb3356.github.io/#works" class="">Works</a>
                </li>
                <li class="">
                    <a href="https://pandabb3356.github.io/blog" class="">Blog</a>
                </li>
            </ul>
        </nav>
    </div>

</header>    <!-- end s-header -->


    <main class="s-content">

        <!-- # site main content
        ================================================== -->
        <article id="content" class="s-content entry">

            <div class="s-pageheader entry__header">
                <div class="row">
                    <div class="column xl-12">

                        <h1 class="entry__title">
                            Integrating pprof with Gin
                        </h1> <!-- end entry__title -->

                        <div class="entry__meta">
                            <div class="entry__meta-date">
                                <svg width="24" height="24" fill="none" viewBox="0 0 24 24">
                                    <circle cx="12" cy="12" r="7.25" stroke="currentColor" stroke-width="1.5"></circle>
                                    <path stroke="currentColor" stroke-width="1.5" d="M12 8V12L14 14"></path>
                                </svg>
                                August 18, 2023
                            </div>
                            <div class="entry__meta-cat">
                                <svg width="24" height="24" fill="none" viewBox="0 0 24 24">
                                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M19.25 17.25V9.75C19.25 8.64543 18.3546 7.75 17.25 7.75H4.75V17.25C4.75 18.3546 5.64543 19.25 6.75 19.25H17.25C18.3546 19.25 19.25 18.3546 19.25 17.25Z"></path>
                                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M13.5 7.5L12.5685 5.7923C12.2181 5.14977 11.5446 4.75 10.8127 4.75H6.75C5.64543 4.75 4.75 5.64543 4.75 6.75V11"></path>
                                </svg>
                                <span class="cat-links">
                                    <a href="https://pandabb3356.github.io/tag/golang.html">golang</a>
                                    <a href="https://pandabb3356.github.io/tag/gin.html">gin</a>
                                    <a href="https://pandabb3356.github.io/tag/pprof.html">pprof</a>
                                </span>
                            </div>
                        </div> <!-- end entry__meta -->

                    </div>
                </div>
            </div> <!-- end entry__header -->

            <div class="s-pagecontent entry__content">

                <div class="row entry__media">
                    <div class="column xl-12">
                        <figure class="featured-image">
                            <img src="https://pandabb3356.github.io/images/covers/austin-distel-21GWwco-JBQ-unsplash.jpg" alt=""/>
                            <figcaption class="featured-image-title">
                                Photo by <a href="https://unsplash.com/@austindistel?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText">Austin Distel</a> on <a href="https://unsplash.com/photos/21GWwco-JBQ?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText">Unsplash</a>
                            </figcaption>
                        </figure>
                    </div>
                </div> <!-- end entry__media -->

                <div class="row entry__primary width-narrower">
                    <div class="column xl-12">
                         <p>Profiling applications is crucial for understanding performance bottlenecks. In Go, the standard library offers the <code>pprof</code> package for this purpose. This article covers how to integrate <code>pprof</code> with the Gin web framework using the <code>gin-contrib/pprof</code> package.</p>
<h2>Prerequisites</h2>
<ul>
<li>A Go development environment.</li>
<li>Knowledge of the Gin framework.</li>
</ul>
<h2>Setting Up Gin</h2>
<p>Install Gin:</p>
<div class="highlight"><pre><span></span><code><span class="k">go</span><span class="w"> </span><span class="nx">get</span><span class="w"> </span><span class="o">-</span><span class="nx">u</span><span class="w"> </span><span class="nx">github</span><span class="p">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">gin</span><span class="o">-</span><span class="nx">gonic</span><span class="o">/</span><span class="nx">gin</span><span class="w"></span>
</code></pre></div>

<p>Create a simple <code>Gin</code> application:</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="s">&quot;github.com/gin-gonic/gin&quot;</span><span class="w"></span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">r</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">gin</span><span class="p">.</span><span class="nx">Default</span><span class="p">()</span><span class="w"></span>
<span class="w">    </span><span class="nx">r</span><span class="p">.</span><span class="nx">GET</span><span class="p">(</span><span class="s">&quot;/&quot;</span><span class="p">,</span><span class="w"> </span><span class="kd">func</span><span class="p">(</span><span class="nx">c</span><span class="w"> </span><span class="o">*</span><span class="nx">gin</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nx">c</span><span class="p">.</span><span class="nx">String</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Welcome to Gin!&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">})</span><span class="w"></span>
<span class="w">    </span><span class="nx">r</span><span class="p">.</span><span class="nx">Run</span><span class="p">(</span><span class="s">&quot;:8080&quot;</span><span class="p">)</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<p>If you run the application and visit <code>http://localhost:8080/</code>, you should see "Welcome to Gin!".</p>
<h2>Integrating <code>pprof</code> using <code>gin-contrib/pprof</code></h2>
<ol>
<li>Start by installing the <code>gin-contrib/pprof</code> package:</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="k">go</span><span class="w"> </span><span class="nx">get</span><span class="w"> </span><span class="o">-</span><span class="nx">u</span><span class="w"> </span><span class="nx">github</span><span class="p">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">gin</span><span class="o">-</span><span class="nx">contrib</span><span class="o">/</span><span class="nx">pprof</span><span class="w"></span>
</code></pre></div>

<ol>
<li>Modify your Gin application to integrate <code>pprof</code>:</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;github.com/gin-gonic/gin&quot;</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;github.com/gin-contrib/pprof&quot;</span><span class="w"></span>
<span class="p">)</span><span class="w"></span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">r</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">gin</span><span class="p">.</span><span class="nx">Default</span><span class="p">()</span><span class="w"></span>
<span class="w">    </span><span class="nx">r</span><span class="p">.</span><span class="nx">GET</span><span class="p">(</span><span class="s">&quot;/&quot;</span><span class="p">,</span><span class="w"> </span><span class="kd">func</span><span class="p">(</span><span class="nx">c</span><span class="w"> </span><span class="o">*</span><span class="nx">gin</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nx">c</span><span class="p">.</span><span class="nx">String</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Welcome to Gin!&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">})</span><span class="w"></span>

<span class="w">    </span><span class="c1">// Use the pprof middleware</span><span class="w"></span>
<span class="w">    </span><span class="nx">pprof</span><span class="p">.</span><span class="nx">Register</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span><span class="w"></span>

<span class="w">    </span><span class="nx">r</span><span class="p">.</span><span class="nx">Run</span><span class="p">(</span><span class="s">&quot;:8080&quot;</span><span class="p">)</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<p>The <code>pprof.Register(r)</code> function attaches all standard <code>net/http/pprof</code> handlers to the provided <code>*gin.Engine</code>.</p>
<h2>Accessing Profiling Data</h2>
<p>After starting your application:</p>
<ul>
<li>Visit <code>http://localhost:8080/debug/pprof/</code> for an overview.</li>
<li>Navigate to <code>http://localhost:8080/debug/pprof/heap</code> for heap profile data.</li>
<li>Use <code>http://localhost:8080/debug/pprof/goroutine</code> for a goroutine profile.</li>
</ul>
<p>... and so on for other available profiles.</p>
<h2>Conclusion</h2>
<p>Using <code>gin-contrib/pprof</code> simplifies the process of integrating Go's built-in <code>pprof</code> profiling tools with the Gin framework. By taking advantage of this integration, developers can quickly gather performance data on their web applications, making it easier to optimize and debug. Happy profiling!</p>
<h2>Reference</h2>
<ul>
<li><a href="https://github.com/gin-contrib/pprof">github.com/gin-contrib/pprof</a></li>
</ul>

                        <div class="post-nav">
                                <div class="post-nav__prev">
                                    <span>Prev</span>
                                    <a rel="prev" href="https://pandabb3356.github.io/designing-notification-service-python.html">← Designing a Notification Service using Python</a>
                                </div>


                        </div> <!-- end post-nav -->
                    </div> <!-- end column-->
                </div> <!-- end entry__primary -->


            </div> <!-- end entry__content -->

        </article> <!-- s-content entry-->

    </main>

    <!-- ## footer
    ================================================== -->
<footer class="s-footer">

    <div class="row">
        <div class="column ss-copyright">
            <span>Powered by <a href="https://getpelican.com/">Pelican</a></span>
            <span>© Copyright Ken Huang 2023</span>
            <span>Design by <a href="https://www.styleshout.com/">StyleShout</a></span>
        </div>

        <div class="ss-go-top">
            <a class="smoothscroll" title="Back to Top" href="#top">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill-rule="evenodd" clip-rule="evenodd"><path d="M11 2.206l-6.235 7.528-.765-.645 7.521-9 7.479 9-.764.646-6.236-7.53v21.884h-1v-21.883z"/></svg>
            </a>
        </div>
    </div>
</footer>    <!-- end s-footer -->

</div> <!-- end -s-pagewrap -->


<!-- Java Script
================================================== -->

<script src="https://pandabb3356.github.io/theme/js/plugins.js"></script>

<script src="https://pandabb3356.github.io/theme/js/main.js"></script>

<script src="https://pandabb3356.github.io/theme/js/clipboard.min.js"></script>

<script src="https://pandabb3356.github.io/theme/js/custom.js"></script>


    
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-M3C36GR88F"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-M3C36GR88F');
</script>

</body>
</html>