
<!DOCTYPE html>

<html class="no-js ss-preload" lang="en">
<head>
<!--- basic page needs
    ================================================== -->
<meta charset="utf-8"/>
<title>Python Metaprogramming and Decorators: Enhancing Code Dynamics | KH</title>
<meta content="I am Ken Huang (KH). I am a backend developer based in Taipei." name="description"/>
<meta content="Ken Huang" name="author"/>
<!-- mobile specific metas
    ================================================== -->
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<!-- CSS
    ================================================== -->
<link href="https://pandabb3356.github.io/theme/css/vendor.css" rel="stylesheet" type="text/css"/>
<link href="https://pandabb3356.github.io/theme/css/styles.css" rel="stylesheet" type="text/css"/>
<link href="https://pandabb3356.github.io/theme/pygments/monokai.min.css" id="pygments-dark-theme" media="(prefers-color-scheme: dark), (prefers-color-scheme: no-preference)" rel="stylesheet" type="text/css"/><link href="https://pandabb3356.github.io/theme/font-awesome/css/fontawesome.css" rel="stylesheet" type="text/css"/>
<link href="https://pandabb3356.github.io/theme/font-awesome/css/brands.css" rel="stylesheet" type="text/css"/>
<link href="https://pandabb3356.github.io/theme/font-awesome/css/solid.css" rel="stylesheet" type="text/css"/>
<!-- favicons
    ================================================== -->
<link href="https://pandabb3356.github.io/theme/images/favicons/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180"/>
<link href="https://pandabb3356.github.io/theme/images/favicons/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png"/>
<link href="https://pandabb3356.github.io/theme/images/favicons/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png"/>
<link href="https://pandabb3356.github.io/theme/site.webmanifest" rel="manifest"/>
<link href="https://pandabb3356.github.io/theme/css/stork-dark.css" media="screen and (prefers-color-scheme: dark)" rel="stylesheet"/>
<!-- Open Graph -->
<meta content="article" property="og:type"/>
<meta content="KH" property="og:site_name"/>
<meta content="Python Metaprogramming and Decorators: Enhancing Code Dynamics" property="og:title"/>
<meta content="Dive into Python's metaprogramming realm with a spotlight on decorators. Understand their functioning, unveil practical implementations, and craft custom decorators to uplift code aesthetics and reliability." property="og:description"/>
<meta content="en_US" property="og:locale"/>
<meta content="https://pandabb3356.github.io/python-metaprogramming-decorators.html" property="og:url"/>
<meta content="Python Metaprogramming and Decorators: Enhancing Code Dynamics" property="title"/>
<meta content="2023-08-22 21:58:50+0800" property="article:published_time"/>
<meta content="2023-08-22 22:02:17+0800" property="article:modified_time"/>
<meta content="https://pandabb3356.github.io" property="article:author"/>
<meta content="Python" property="article:section"/>
<meta content="python" property="article:tag"/>
<meta content="decorators" property="article:tag"/>
<meta content="https://pandabb3356.github.io/images/covers/henry-perks-dw5fYCa8kFs-unsplash.jpg" property="og:image"/>
<!-- Twitter Cards -->
<meta content="summary" name="twitter:card"/>
<meta content="Python Metaprogramming and Decorators: Enhancing Code Dynamics" name="twitter:title"/>
<meta content="Dive into Python's metaprogramming realm with a spotlight on decorators. Understand their functioning, unveil practical implementations, and craft custom decorators to uplift code aesthetics and reliability." name="twitter:description"/>
<meta content="https://pandabb3356.github.io/images/covers/henry-perks-dw5fYCa8kFs-unsplash.jpg" name="twitter:image"/>
<meta content="https://pandabb3356.github.io/python-metaprogramming-decorators.html" name="twitter:url"/>
<link href="https://pandabb3356.github.io/python-metaprogramming-decorators.html" rel="canonical"/><script type="application/ld+json">{"@context": "https://schema.org", "@type": "BreadcrumbList", "itemListElement": [{"@type": "ListItem", "position": 1, "name": "KH", "item": "https://pandabb3356.github.io"}, {"@type": "ListItem", "position": 2, "name": "Python metaprogramming decorators", "item": "https://pandabb3356.github.io/python-metaprogramming-decorators.html"}]}</script><script type="application/ld+json">{"@context": "https://schema.org", "@type": "Article", "author": {"@type": "Person", "name": "Ken Huang"}, "publisher": {"@type": "Organization", "name": "KH", "logo": {"@type": "ImageObject", "url": "https://pandabb3356.github.io/images/logos/logo-main.png"}}, "headline": "Python Metaprogramming and Decorators: Enhancing Code Dynamics", "about": "Python", "datePublished": "2023-08-22 21:58", "image": "https://pandabb3356.github.io/images/covers/henry-perks-dw5fYCa8kFs-unsplash.jpg"}</script></head>
<body id="top">
<!-- # preloader
================================================== -->
<div id="preloader">
<div id="loader">
</div>
</div>
<!-- # page wrap
================================================== -->
<div class="s-pagewrap">
<div class="circles">
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
</div>
<!-- ## site header
    ================================================== -->
<header class="s-header">
<div class="header-mobile">
<span class="mobile-home-link">
<a href="https://pandabb3356.github.io/">
<img alt="" src="https://pandabb3356.github.io/theme/images/logos/logo-main.png"/>
</a>
</span>
<a class="mobile-menu-toggle" href="#0"><span>Menu</span></a>
</div>
<div class="row wide main-nav-wrap">
<nav class="column lg-12 main-nav">
<ul>
<li><a class="home-link" href="/"><img alt="" src="https://pandabb3356.github.io/theme/images/logos/logo-main.png"/></a>
</li>
<li class="current">
<a class="" href="https://pandabb3356.github.io/#intro">Intro</a>
</li>
<li class="">
<a class="" href="https://pandabb3356.github.io/#about">About</a>
</li>
<li class="">
<a class="" href="https://pandabb3356.github.io/#works">Works</a>
</li>
<li class="">
<a class="" href="https://pandabb3356.github.io/blog">Blog</a>
</li>
</ul>
</nav>
</div>
<div class="s-header__search">
<div class="s-header__search-inner">
<div class="row wide">
<form action="#" class="s-header__search-form" method="get" role="search">
<label>
<span class="h-screen-reader-text">Search for:</span>
<input autocomplete="off" class="s-header__search-field" data-stork="sitesearch" name="s" placeholder="Search for..." title="Search for:" type="search" value=""/>
</label>
<input class="s-header__search-submit" type="submit" value="Search"/>
</form>
<a class="s-header__overlay-close" href="#0" title="Close Search"> </a>
</div> <!-- end row -->
<div data-stork="sitesearch-output"></div>
</div> <!-- s-header__search-inner -->
</div> <!-- end s-header__search wrap -->
<a class="s-header__search-trigger" href="#">
<svg viewbox="0 0 17.982 17.983" xmlns="http://www.w3.org/2000/svg">
<path d="M12.622 13.611l-.209.163A7.607 7.607 0 017.7 15.399C3.454 15.399 0 11.945 0 7.7 0 3.454 3.454 0 7.7 0c4.245 0 7.699 3.454 7.699 7.7a7.613 7.613 0 01-1.626 4.714l-.163.209 4.372 4.371-.989.989-4.371-4.372zM7.7 1.399a6.307 6.307 0 00-6.3 6.3A6.307 6.307 0 007.7 14c3.473 0 6.3-2.827 6.3-6.3a6.308 6.308 0 00-6.3-6.301z" fill="#010101"></path>
</svg>
</a>
</header> <!-- end s-header -->
<main class="s-content">
<!-- # site main content
        ================================================== -->
<article class="s-content entry" id="content">
<div class="s-pageheader entry__header">
<div class="row">
<div class="column xl-12">
<h1 class="entry__title">
                            Python Metaprogramming and Decorators: Enhancing Code Dynamics
                        </h1> <!-- end entry__title -->
<div class="entry__meta">
<div class="entry__meta-date">
<svg fill="none" height="24" viewbox="0 0 24 24" width="24">
<circle cx="12" cy="12" r="7.25" stroke="currentColor" stroke-width="1.5"></circle>
<path d="M12 8V12L14 14" stroke="currentColor" stroke-width="1.5"></path>
</svg>
                                August 22, 2023
                            </div>
<div class="entry__meta-cat">
<svg fill="none" height="24" viewbox="0 0 24 24" width="24">
<path d="M19.25 17.25V9.75C19.25 8.64543 18.3546 7.75 17.25 7.75H4.75V17.25C4.75 18.3546 5.64543 19.25 6.75 19.25H17.25C18.3546 19.25 19.25 18.3546 19.25 17.25Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"></path>
<path d="M13.5 7.5L12.5685 5.7923C12.2181 5.14977 11.5446 4.75 10.8127 4.75H6.75C5.64543 4.75 4.75 5.64543 4.75 6.75V11" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"></path>
</svg>
<span class="cat-links">
<a href="https://pandabb3356.github.io/tag/python.html">python</a>
<a href="https://pandabb3356.github.io/tag/decorators.html">decorators</a>
</span>
</div>
</div> <!-- end entry__meta -->
</div>
</div>
</div> <!-- end entry__header -->
<div class="s-pagecontent entry__content">
<div class="row entry__media">
<div class="column xl-12">
<figure class="featured-image">
<img alt="" src="https://pandabb3356.github.io/images/covers/henry-perks-dw5fYCa8kFs-unsplash.jpg"/>
<figcaption class="featured-image-title">
                                Photo by <a href="https://unsplash.com/@hjkp?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">henry perks</a> on <a href="https://unsplash.com/photos/dw5fYCa8kFs?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Unsplash</a>
</figcaption>
</figure>
</div>
</div> <!-- end entry__media -->
<div class="row entry__primary width-narrower">
<div class="column xl-12">
<p>Python, being a dynamic language, provides robust tools for metaprogramming – the art of writing code that manipulates itself. One such metaprogramming tool that stands out is the 'decorator'. They not only improve code readability but also introduce added functionalities seamlessly.</p>
<h2>A Glimpse into Metaprogramming</h2>
<p>Metaprogramming is the practice of writing programs that can modify, generate, or manipulate other programs (or themselves). In Python, this often translates to altering classes, functions, or modules at runtime.</p>
<p>Examples include:
- Dynamic attribute addition to objects.
- Modifying classes with class decorators.
- Wrapping or modifying functions with decorators.</p>
<h2>Deciphering Decorators</h2>
<p>Decorators, in essence, are design patterns in Python, allowing you to add new functionalities to existing objects without altering their structure. They're often prefixed with <code>@</code> and placed above functions or methods.</p>
<h3>A Basic Decorator:</h3>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">simple_decorator</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"Before the function call"</span><span class="p">)</span>
        <span class="n">func</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"After the function call"</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">wrapper</span>

<span class="nd">@simple_decorator</span>
<span class="k">def</span> <span class="nf">say_hello</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">"Hello!"</span><span class="p">)</span>

<span class="n">say_hello</span><span class="p">()</span>
</code></pre></div>
<p>Executing <code>say_hello()</code> would print:</p>
<div class="highlight"><pre><span></span><code>Before the function call
Hello!
After the function call
</code></pre></div>
<p>The <code>@simple_decorator</code> is a syntactic sugar for: <code>say_hello = simple_decorator(say_hello)</code>.</p>
<h3>Practical Applications of Decorators</h3>
<ol>
<li>
<p><strong>Logging</strong>: Track metadata about function execution times, arguments, or results.</p>
</li>
<li>
<p><strong>Authorization</strong>: Check if someone's authorized to use an API endpoint, a method, etc.</p>
</li>
<li>
<p><strong>Enrichment</strong>: Modify the results or inputs of functions, e.g., changing the datatype, adding default values, or computing additional data.</p>
</li>
<li>
<p><strong>Memoization</strong>: Store results of expensive function calls and return the cached result when the same inputs occur again.</p>
</li>
</ol>
<h3>Crafting Custom Decorators</h3>
<p>To elevate code legibility and upkeep:</p>
<ol>
<li>
<p><strong>With Arguments</strong>:</p>
<p>Decorators can also accept arguments, allowing you to further customize behavior. For instance, a decorator to repeat the execution of a function <code>n</code> times:</p>
</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">repeat</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">decorator</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
                <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">result</span>
        <span class="k">return</span> <span class="n">wrapper</span>
    <span class="k">return</span> <span class="n">decorator</span>

<span class="nd">@repeat</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">greet</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Hello, </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">!"</span><span class="p">)</span>

<span class="n">greet</span><span class="p">(</span><span class="s2">"Alice"</span><span class="p">)</span>
</code></pre></div>
<p>This prints "Hello, Alice!" thrice.</p>
<ol>
<li>
<p><strong>Class Decorators</strong>:</p>
<p>For enhancing or modifying classes:</p>
</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">readonly_properties</span><span class="p">(</span><span class="o">*</span><span class="n">attrs</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">class_decorator</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="n">attrs</span><span class="p">:</span>
            <span class="n">prop</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">attr</span><span class="p">])</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">attr</span><span class="p">,</span> <span class="n">prop</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span>

    <span class="k">return</span> <span class="n">class_decorator</span>

<span class="nd">@readonly_properties</span><span class="p">(</span><span class="s1">'name'</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">Person</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>

    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span>

<span class="n">p</span> <span class="o">=</span> <span class="n">Person</span><span class="p">(</span><span class="s2">"John"</span><span class="p">)</span>
<span class="c1"># p.name = "Doe"  # This will raise an error</span>
</code></pre></div>
<p>The <code>readonly_properties</code> decorator makes class properties read-only, preventing unintended changes.</p>
<h2>Conclusion</h2>
<p>Decorators are Python's gems, allowing for code augmentation without direct modifications. They embody the essence of metaprogramming, offering the ability to enhance, control, and extend functionalities. By integrating decorators into your toolkit, you empower your codebase, ensuring it remains DRY (Don't Repeat Yourself), readable, and maintainable.</p>
<div class="post-nav">
<div class="post-nav__prev">
<span>Prev</span>
<a href="https://pandabb3356.github.io/golang-observer-pattern-with-goroutines.html" rel="prev">← Observer Pattern with Goroutines: Building Signal-Like Mechanisms in Go</a>
</div>
</div> <!-- end post-nav -->
</div> <!-- end column-->
</div> <!-- end entry__primary -->
<div class="row related-posts">
<div class="column xl-12">
<h4 class="text-center">Similar Posts</h4>
<div class="grid-list-items">
<div class="grid-list-items__item blog-card">
<div class="blog-card__header">
<h3 class="blog-card__title"><a href="https://pandabb3356.github.io/pelican-static-site-generation-python.html">Pelican: Static Site Generation in Python</a></h3>
</div>
<div>
<img alt="" loading="lazy" src="https://pandabb3356.github.io/images/covers/jackson-sophat-_t-l5FFH8VA-unsplash.jpg"/>
</div>
<div class="blog-card__text">
<p>An introduction to Pelican, a powerful static site generator built on Python, and its various features and applications.</p>
</div>
</div> <!-- end blog-card -->
<div class="grid-list-items__item blog-card">
<div class="blog-card__header">
<h3 class="blog-card__title"><a href="https://pandabb3356.github.io/gensim-topic-modelling-python.html">Gensim - Topic Modelling in Python</a></h3>
</div>
<div>
<img alt="" loading="lazy" src="https://pandabb3356.github.io/images/covers/patrick-tomasso-Oaqk7qqNh_c-unsplash.jpg"/>
</div>
<div class="blog-card__text">
<p>Dive into topic modelling in Python using the Gensim library, and understand how it can help organize and understand large sets of textual data.</p>
</div>
</div> <!-- end blog-card -->
</div> <!-- end grid-list-items -->
</div> <!-- end column -->
</div> <!-- end related-posts -->
</div> <!-- end entry__content -->
</article> <!-- s-content entry-->
</main>
<!-- ## footer
    ================================================== -->
<footer class="s-footer">
<div class="row">
<div class="column ss-copyright">
<span>Powered by <a href="https://getpelican.com/">Pelican</a></span>
<span>© Copyright Ken Huang 2023</span>
<span>Design by <a href="https://www.styleshout.com/">StyleShout</a></span>
</div>
<div class="ss-go-top">
<a class="smoothscroll" href="#top" title="Back to Top">
<svg clip-rule="evenodd" fill-rule="evenodd" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M11 2.206l-6.235 7.528-.765-.645 7.521-9 7.479 9-.764.646-6.236-7.53v21.884h-1v-21.883z"></path></svg>
</a>
</div>
</div>
</footer> <!-- end s-footer -->
</div> <!-- end -s-pagewrap -->
<!-- Java Script
================================================== -->
<script src="https://pandabb3356.github.io/theme/js/plugins.js"></script>
<script src="https://pandabb3356.github.io/theme/js/clipboard.min.js"></script>
<script src="https://pandabb3356.github.io/theme/js/stork.min.js"></script>
<script src="https://pandabb3356.github.io/theme/js/main.js"></script>
<script>
    stork.register("sitesearch", "https://pandabb3356.github.io/search-index.st");
</script>
<!-- Google tag (gtag.js) -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-M3C36GR88F"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-M3C36GR88F');
</script>
</body>
</html>